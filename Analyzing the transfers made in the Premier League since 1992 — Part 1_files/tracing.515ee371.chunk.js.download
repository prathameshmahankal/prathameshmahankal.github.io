(window.webpackJsonp=window.webpackJsonp||[]).push([[41],{"./src/util/tracing.ts":function(e,n,t){"use strict";t.r(n),t.d(n,"init",(function(){return a})),t.d(n,"extractSpan",(function(){return u})),t.d(n,"instrumentAppPerformance",(function(){return l}));var r=t("./node_modules/lightstep-tracer/browser.js"),o=t("./node_modules/opentracing/lib/index.js"),s=t("./src/store/actions/debug.ts"),i=t("./src/store/selectors/session.ts"),c=t("./src/util/performance.ts"),a=function(e){var n=e.name,t=e.host,s=e.token,i=e.appVersion,c=new r.Tracer({component_name:n,xhr_instrumentation:!1,access_token:s,collector_host:t,default_span_tags:{"component.version":i}});return Object(o.initGlobalTracer)(c),c},u=function(e,n){return n?e.extract(o.FORMAT_HTTP_HEADERS,n):null},l=function(e,n,t,r,a,u,l){var f=l?l.metricName:"unidentified",p={"user.logged_in":Object(i.a)(a),"req.route_name":f,"req.route":f};u.forEach((function(e){return p["req.".concat(e)]=1}));var d={loggedIn:Object(i.a)(a),route:f,withinPostInternalLinksExperiment:u.includes("post_internal_links")},g=function(e){return Math.round(1e3*e)},m=function(n,t,r,o){var s=r.start,i=r.end,c=e.startSpan("timing.".concat(t),{childOf:n,tags:p}).setBeginMicros(g(s)).setEndMicros(g(i));return null!=o&&o(c),c.finish(),c};c.f.observe((function(i){r.reportRender(d,i);var c=e.startSpan("timing.navigation",{references:[Object(o.followsFrom)(n)],tags:p}).setBeginMicros(g(i.load.start)).setEndMicros(g(i.load.end));m(c,"beforeDomainLookup",i.beforeDomainLookup),m(c,"domainLookup",i.domainLookup),m(c,"connect",i.connect),m(c,"request",i.request),m(c,"response",i.response),m(c,"processing",i.processing);var a=i.overallFCP,u=i.client,l=i.render;null!=a&&m(c,"firstContentfulPaint",a),null!=u&&m(c,"client",u,(function(e){null!=l&&m(e,"render",l)})),c.finish(),t(Object(s.c)(c.generateTraceURL()))})),c.b.observe((function(t){r.reportFirstContentfulPaint(d,t),e.startSpan("timing.firstContentfulPaint.v2",{references:[Object(o.followsFrom)(n)],tags:p}).setBeginMicros(g(t.start)).setEndMicros(g(t.end)).finish()})),c.d.observe((function(t){r.reportLargestContentfulPaint(d,t),e.startSpan("timing.largestContentfulPaint",{references:[Object(o.followsFrom)(n)],tags:p}).setBeginMicros(g(t.start)).setEndMicros(g(t.end)).finish()})),c.g.observe((function(e){r.reportUnsupportedPerfObserver(d)})),c.c.observe((function(t){r.reportInput(d,t),e.startSpan("timing.input.first.delay",{references:[Object(o.followsFrom)(n)],tags:p}).setBeginMicros(g(t.start)).setEndMicros(g(t.end)).finish()}))}}}]);
//# sourceMappingURL=tracing.515ee371.chunk.js.map